(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5690dc97"],{"02f4":function(e,t,r){var a=r("4588"),o=r("be13");e.exports=function(e){return function(t,r){var i,n,s=String(o(t)),l=a(r),c=s.length;return l<0||l>=c?e?"":void 0:(i=s.charCodeAt(l),i<55296||i>56319||l+1===c||(n=s.charCodeAt(l+1))<56320||n>57343?e?s.charAt(l):i:e?s.slice(l,l+2):n-56320+(i-55296<<10)+65536)}}},"0390":function(e,t,r){"use strict";var a=r("02f4")(!0);e.exports=function(e,t,r){return t+(r?a(e,t).length:1)}},"0bfb":function(e,t,r){"use strict";var a=r("cb7c");e.exports=function(){var e=a(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},1674:function(e,t,r){},"214f":function(e,t,r){"use strict";r("b0c5");var a=r("2aba"),o=r("32e9"),i=r("79e5"),n=r("be13"),s=r("2b4c"),l=r("520a"),c=s("species"),u=!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),d=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2===r.length&&"a"===r[0]&&"b"===r[1]}();e.exports=function(e,t,r){var m=s(e),f=!i((function(){var t={};return t[m]=function(){return 7},7!=""[e](t)})),p=f?!i((function(){var t=!1,r=/a/;return r.exec=function(){return t=!0,null},"split"===e&&(r.constructor={},r.constructor[c]=function(){return r}),r[m](""),!t})):void 0;if(!f||!p||"replace"===e&&!u||"split"===e&&!d){var g=/./[m],b=r(n,m,""[e],(function(e,t,r,a,o){return t.exec===l?f&&!o?{done:!0,value:g.call(t,r,a)}:{done:!0,value:e.call(r,t,a)}:{done:!1}})),v=b[0],h=b[1];a(String.prototype,e,v),o(RegExp.prototype,m,2==t?function(e,t){return h.call(e,this,t)}:function(e){return h.call(e,this)})}}},"258e":function(e,t,r){"use strict";var a=r("1674"),o=r.n(a);o.a},"2dcf":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules},nativeOn:{submit:function(e){e.preventDefault()}}},[r("el-row",{attrs:{gutter:10}},[r("el-card",[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[e._v("Informações")])]),e._v(" "),r("el-col",{attrs:{md:12,sm:24}},[r("el-form-item",{directives:[{name:"mask",rawName:"v-mask",value:"##.###.###/####-##",expression:"'##.###.###/####-##'"}],attrs:{label:"CNPJ",prop:"cnpj"}},[r("el-input",{attrs:{disabled:e.loading||e.loading_cnpj},model:{value:e.form.cnpj,callback:function(t){e.$set(e.form,"cnpj",t)},expression:"form.cnpj"}},[r("el-button",{attrs:{slot:"append",loading:e.loading_cnpj,icon:"el-icon-search"},on:{click:function(t){return t.preventDefault(),e.infoCnpj(t)}},slot:"append"})],1)],1)],1),e._v(" "),r("el-col",{attrs:{md:12,sm:24}},[r("el-form-item",{attrs:{label:"Título",prop:"title"}},[r("el-input",{attrs:{disabled:e.loading},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1)],1),e._v(" "),r("el-col",{attrs:{md:12,sm:24}},[r("el-form-item",{attrs:{label:"Nome Fantasia",prop:"fantasy"}},[r("el-input",{attrs:{disabled:e.loading},model:{value:e.form.fantasy,callback:function(t){e.$set(e.form,"fantasy",t)},expression:"form.fantasy"}})],1)],1),e._v(" "),r("el-col",{attrs:{md:12,sm:24}},[r("el-form-item",{attrs:{label:"Telefone",prop:"phone"}},[r("el-input",{attrs:{disabled:e.loading},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1)],1),e._v(" "),r("el-col",{attrs:{md:12,sm:24}},[r("el-form-item",{attrs:{label:"Inscrição estadual",prop:"ie"}},[r("el-input",{attrs:{disabled:e.loading},model:{value:e.form.ie,callback:function(t){e.$set(e.form,"ie",t)},expression:"form.ie"}})],1)],1),e._v(" "),r("el-col",{attrs:{md:12,sm:24}},[r("el-form-item",{attrs:{label:"CEP",prop:"cep"}},[r("el-input",{directives:[{name:"mask",rawName:"v-mask",value:"#####-###",expression:"'#####-###'"}],attrs:{disabled:e.loading||e.loading_cep},on:{change:function(t){return e.getCep()}},model:{value:e.form.cep,callback:function(t){e.$set(e.form,"cep",t)},expression:"form.cep"}})],1)],1),e._v(" "),r("el-col",{attrs:{md:12,sm:24}},[r("el-form-item",{attrs:{label:"Estado",prop:"state_id"}},[r("el-select",{attrs:{filterable:"",disabled:e.loading||e.loading_cep||e.loading_cities},on:{change:function(t){return e.getCities(!0)}},model:{value:e.form.state_id,callback:function(t){e.$set(e.form,"state_id",t)},expression:"form.state_id"}},e._l(e.states,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),e._v(" "),r("el-col",{attrs:{md:12,sm:24}},[r("el-form-item",{attrs:{label:"Cidade",prop:"city_id"}},[r("el-select",{attrs:{filterable:"",disabled:e.loading||e.loading_cep||e.loading_cities},model:{value:e.form.city_id,callback:function(t){e.$set(e.form,"city_id",t)},expression:"form.city_id"}},e._l(e.cities,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),e._v(" "),r("el-col",{attrs:{md:12,sm:24}},[r("el-form-item",{attrs:{label:"Bairro",prop:"neighborhood"}},[r("el-input",{attrs:{disabled:e.loading||e.loading_cep},model:{value:e.form.neighborhood,callback:function(t){e.$set(e.form,"neighborhood",t)},expression:"form.neighborhood"}})],1)],1),e._v(" "),r("el-col",{attrs:{md:12,sm:24}},[r("el-form-item",{attrs:{label:"Endereço",prop:"address"}},[r("el-input",{attrs:{disabled:e.loading||e.loading_cep},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1)],1),e._v(" "),r("el-col",{attrs:{md:12,sm:24}},[r("el-form-item",{attrs:{label:"Número",prop:"number"}},[r("el-input-number",{attrs:{disabled:e.loading,"controls-position":"right",min:1,max:99999},model:{value:e.form.number,callback:function(t){e.$set(e.form,"number",t)},expression:"form.number"}})],1)],1)],1),e._v(" "),r("el-card",[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[e._v("Informações fiscais")])]),e._v(" "),r("el-col",{attrs:{md:12,sm:24}},[r("el-form-item",{attrs:{label:"CRT (Código regime tributário)",prop:"crt"}},[r("el-select",{attrs:{filterable:"",disabled:e.loading},model:{value:e.form.crt,callback:function(t){e.$set(e.form,"crt",t)},expression:"form.crt"}},e._l(e.crts,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1)],1),e._v(" "),r("el-card",[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[e._v("Certificando NFE")])]),e._v(" "),r("el-col",{attrs:{md:12,sm:24}},[r("el-form-item",{attrs:{label:"Arquivo (.PFX)",prop:"cert_file"}},[r("el-upload",{staticClass:"cert_file",attrs:{action:e.base_api+"/company/file",headers:{Authorization:"Bearer "+e.token,Accept:"application/json"},"file-list":e.fileList,"on-change":e.handleChange,"on-error":e.handleUploadError,"on-success":e.handleSuccess,"on-exceed":e.handleExceed,"before-remove":e.beforeRemove,"on-progress":e.handleProgress,limit:1}},[r("el-button",{attrs:{size:"small",type:"default",disabled:e.loading}},[e._v("Arquivo")])],1)],1)],1),e._v(" "),r("el-col",{attrs:{md:12,sm:24}},[r("el-form-item",{attrs:{label:"Senha do arquivo",prop:"cert_password"}},[r("el-input",{attrs:{disabled:e.loading},model:{value:e.form.cert_password,callback:function(t){e.$set(e.form,"cert_password",t)},expression:"form.cert_password"}})],1)],1)],1),e._v(" "),r("el-card",[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[e._v("Impostos (%)")])]),e._v(" "),r("el-col",{attrs:{md:12,sm:24}},[r("el-form-item",{attrs:{label:"(IRPJ) Imposto de Renda de Pessoa Jurídica​",prop:"irpj"}},[r("el-input-number",{attrs:{disabled:e.loading,"controls-position":"right",min:0,max:100},model:{value:e.form.irpj,callback:function(t){e.$set(e.form,"irpj",t)},expression:"form.irpj"}})],1)],1),e._v(" "),r("el-col",{attrs:{md:12,sm:24}},[r("el-form-item",{attrs:{label:"COFINS (Contribuição pa​ra Financiamento de Seguridade Social)",prop:"cofins"}},[r("el-input-number",{attrs:{disabled:e.loading,"controls-position":"right",min:0,max:100},model:{value:e.form.cofins,callback:function(t){e.$set(e.form,"cofins",t)},expression:"form.cofins"}})],1)],1),e._v(" "),r("el-col",{attrs:{md:12,sm:24}},[r("el-form-item",{attrs:{label:"(PIS) Programa de Integração Social",prop:"pis"}},[r("el-input-number",{attrs:{disabled:e.loading,"controls-position":"right",min:0,max:100},model:{value:e.form.pis,callback:function(t){e.$set(e.form,"pis",t)},expression:"form.pis"}})],1)],1),e._v(" "),r("el-col",{attrs:{md:12,sm:24}},[r("el-form-item",{attrs:{label:"(CSLL) Contribuição Social sobre Lucro Líquido",prop:"csll"}},[r("el-input-number",{attrs:{disabled:e.loading,"controls-position":"right",min:0,max:100},model:{value:e.form.csll,callback:function(t){e.$set(e.form,"csll",t)},expression:"form.csll"}})],1)],1),e._v(" "),r("el-col",{attrs:{md:12,sm:24}},[r("el-form-item",{attrs:{label:"(ISS) Imposto sobre Serviço de Qualquer Natureza",prop:"iss"}},[r("el-input-number",{attrs:{disabled:e.loading,"controls-position":"right",min:0,max:100},model:{value:e.form.iss,callback:function(t){e.$set(e.form,"iss",t)},expression:"form.iss"}})],1)],1),e._v(" "),r("el-col",{attrs:{md:24,sm:24}},[r("el-form-item",[r("router-link",{staticClass:"pull-left",attrs:{to:{name:"company"}}},[r("el-button",{attrs:{size:"mini"}},[e._v("Voltar")])],1),e._v(" "),r("el-button",{staticClass:"pull-right",attrs:{size:"mini",loading:e.loading,type:"primary"},on:{click:function(t){return e.onSubmit("form")}}},[e._v("Salvar")])],1)],1)],1)],1)],1)],1)},o=[],i=(r("7f7f"),r("a481"),r("456d"),r("ac6a"),r("fcac")),n=r("5f87"),s=r("5c96"),l=r("4867"),c=r("c591"),u=r("c678"),d=r("e6dd"),m={data:function(){return{fileList:[],token:Object(n["a"])(),base_api:"http://api.rocketzweb.kinghost.net/api",loading:!1,loading_cep:!1,loading_cities:!1,loading_cnpj:!1,states:[],cities:[],crts:[{id:1,name:"Simples Nacional"},{id:2,name:"Simples Nacional – excesso de sublimite da receita bruta"},{id:3,name:"Regime Normal NOTAS EXPLICATIVAS"}],form:{title:null,fantasy:null,cert_password:null,cert_file:null,ie:null,crt:1,cnpj:null,address:null,number:null,neighborhood:null,state_id:null,city_id:null,cep:null,irpj:0,cofins:0,pis:0,csll:0,iss:0,phone:null},rules:{title:[{required:!0,message:"Campo obrigatório"}],fantasy:[{required:!0,message:"Campo obrigatório"}],ie:[{required:!0,message:"Campo obrigatório"}],crt:[{required:!0,message:"Campo obrigatório"}],cnpj:[{required:!0,message:"Campo obrigatório"}],address:[{required:!0,message:"Campo obrigatório"}],number:[{required:!0,message:"Campo obrigatório"}],neighborhood:[{required:!0,message:"Campo obrigatório"}],state_id:[{required:!0,message:"Campo obrigatório"}],city_id:[{required:!0,message:"Campo obrigatório"}],cep:[{required:!0,message:"Campo obrigatório"}],irpj:[{required:!0,message:"Campo obrigatório"}],cofins:[{required:!0,message:"Campo obrigatório"}],pis:[{required:!0,message:"Campo obrigatório"}],csll:[{required:!0,message:"Campo obrigatório"}],iss:[{required:!0,message:"Campo obrigatório"}],phone:[{required:!0,message:"Campo obrigatório"}]}}},created:function(){var e=this;Object(l["a"])().then((function(t){e.states=t.data.data})),this.$route.params.id&&(this.loading=!0,this.fileList=[],Object(i["f"])(this.$route.params.id).then((function(t){Object.keys(e.form).forEach((function(r){e.form[r]=t.data.data[r],"state_id"==r&&e.getCities(),"cert_file"==r&&t.data.data[r]&&e.fileList.push({name:t.data.data[r]})})),e.loading=!1})))},methods:{infoCnpj:function(){var e=this;this.form.cnpj&&this.form.cnpj.length>=14?(this.loading_cnpj=!0,Object(d["a"])({cnpj:this.form.cnpj.replace(/\D/g,"")}).then((function(t){e.form.title=t.data.data.nome,e.form.fantasy=t.data.data.fantasia,e.form.cep=t.data.data.cep,e.form.phone=t.data.data.telefone,e.form.number=t.data.data.numero,e.form.cep&&e.getCep()})).finally((function(t){e.loading_cnpj=!1}))):this.$message.warning("CNPJ inválido.")},handleProgress:function(e,t,r){this.loading=!0},handleChange:function(e,t,r){this.loading=!1},handleExceed:function(e,t){this.$message.warning("Para atualizar o arquivo, apague o atual.")},beforeRemove:function(e){var t=this;return this.$confirm("Desejas realmente excluir esse arquivo?").then((function(){!t.$route.params.id&&t.form.cert_file&&(t.loading=!0,Object(i["b"])(e.name).then((function(e){t.loading=!1}))),t.form.cert_file=null}))},handleSuccess:function(e){this.form.cert_file=e.data,this.fileList=[],this.fileList.push({name:e.data})},handleUploadError:function(e,t){if(404!==e.status){var r=JSON.parse(e.message);Object(s["Message"])({message:void 0!=r.errors?r.errors.file[0]:r.message,type:"error",duration:5e3,dangerouslyUseHTMLString:!0})}else Object(s["Message"])({message:"Ocorreu algum erro. Tente novamente mais tarde.",type:"error",duration:5e3,dangerouslyUseHTMLString:!0})},onSubmit:function(e){var t=this;this.$refs[e].validate((function(r){r&&(t.loading=!0,Object(i["e"])(t.form,t.$route.params.id).then((function(r){t.$message({message:"Salvo com sucesso",type:"success",duration:5e3}),t.$route.params.id||(t.fileList=[],t.$refs[e].resetFields())})).finally((function(e){t.loading=!1})))}))},getCities:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=this;a.loading_cities=!0,Object(c["a"])(this.form.state_id).then((function(o){e.cities=o.data.data;var i=e.form;t&&(i.city_id=null,r&&e.cities.map((function(e){e.name==r&&(i.city_id=e.id)}))),a.loading_cities=!1}))},getCep:function(){var e=this;e.loading_cep=!0,e.cities=[],e.form.neighborhood=null,e.form.address=null,e.form.state_id=null,e.form.city_id=null,Object(u["a"])(this.form.cep).then((function(t){t.data.data&&(e.form.neighborhood=t.data.data.bairro,e.form.address=t.data.data.logradouro,e.states.map((function(r){r.abbr==t.data.data.uf&&(e.form.state_id=r.id,e.getCities(e.form.state_id,t.data.data.localidade))})))})).finally((function(t){e.loading_cep=!1}))}}},f=m,p=(r("258e"),r("2877")),g=Object(p["a"])(f,a,o,!1,null,"702f9640",null);t["default"]=g.exports},"456d":function(e,t,r){var a=r("4bf8"),o=r("0d58");r("5eda")("keys",(function(){return function(e){return o(a(e))}}))},4867:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var a=r("b775");function o(){return Object(a["a"])({url:"/state",method:"get"})}},"520a":function(e,t,r){"use strict";var a=r("0bfb"),o=RegExp.prototype.exec,i=String.prototype.replace,n=o,s="lastIndex",l=function(){var e=/a/,t=/b*/g;return o.call(e,"a"),o.call(t,"a"),0!==e[s]||0!==t[s]}(),c=void 0!==/()??/.exec("")[1],u=l||c;u&&(n=function(e){var t,r,n,u,d=this;return c&&(r=new RegExp("^"+d.source+"$(?!\\s)",a.call(d))),l&&(t=d[s]),n=o.call(d,e),l&&n&&(d[s]=d.global?n.index+n[0].length:t),c&&n&&n.length>1&&i.call(n[0],r,(function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(n[u]=void 0)})),n}),e.exports=n},"5eda":function(e,t,r){var a=r("5ca1"),o=r("8378"),i=r("79e5");e.exports=function(e,t){var r=(o.Object||{})[e]||Object[e],n={};n[e]=t(r),a(a.S+a.F*i((function(){r(1)})),"Object",n)}},"5f1b":function(e,t,r){"use strict";var a=r("23c6"),o=RegExp.prototype.exec;e.exports=function(e,t){var r=e.exec;if("function"===typeof r){var i=r.call(e,t);if("object"!==typeof i)throw new TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==a(e))throw new TypeError("RegExp#exec called on incompatible receiver");return o.call(e,t)}},a481:function(e,t,r){"use strict";var a=r("cb7c"),o=r("4bf8"),i=r("9def"),n=r("4588"),s=r("0390"),l=r("5f1b"),c=Math.max,u=Math.min,d=Math.floor,m=/\$([$&`']|\d\d?|<[^>]*>)/g,f=/\$([$&`']|\d\d?)/g,p=function(e){return void 0===e?e:String(e)};r("214f")("replace",2,(function(e,t,r,g){return[function(a,o){var i=e(this),n=void 0==a?void 0:a[t];return void 0!==n?n.call(a,i,o):r.call(String(i),a,o)},function(e,t){var o=g(r,e,this,t);if(o.done)return o.value;var d=a(e),m=String(this),f="function"===typeof t;f||(t=String(t));var v=d.global;if(v){var h=d.unicode;d.lastIndex=0}var _=[];while(1){var x=l(d,m);if(null===x)break;if(_.push(x),!v)break;var y=String(x[0]);""===y&&(d.lastIndex=s(m,i(d.lastIndex),h))}for(var j="",C=0,k=0;k<_.length;k++){x=_[k];for(var $=String(x[0]),S=c(u(n(x.index),m.length),0),O=[],q=1;q<x.length;q++)O.push(p(x[q]));var w=x.groups;if(f){var E=[$].concat(O,S,m);void 0!==w&&E.push(w);var I=String(t.apply(void 0,E))}else I=b($,m,S,O,w,t);S>=C&&(j+=m.slice(C,S)+I,C=S+$.length)}return j+m.slice(C)}];function b(e,t,a,i,n,s){var l=a+e.length,c=i.length,u=f;return void 0!==n&&(n=o(n),u=m),r.call(s,u,(function(r,o){var s;switch(o.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,a);case"'":return t.slice(l);case"<":s=n[o.slice(1,-1)];break;default:var u=+o;if(0===u)return r;if(u>c){var m=d(u/10);return 0===m?r:m<=c?void 0===i[m-1]?o.charAt(1):i[m-1]+o.charAt(1):r}s=i[u-1]}return void 0===s?"":s}))}}))},b0c5:function(e,t,r){"use strict";var a=r("520a");r("5ca1")({target:"RegExp",proto:!0,forced:a!==/./.exec},{exec:a})},c591:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var a=r("b775");function o(e){return Object(a["a"])({url:"/city/"+e,method:"get"})}},c678:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var a=r("b775");function o(e){return Object(a["a"])({url:"/cep/"+e,method:"get"})}},e6dd:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var a=r("b775");function o(e){return Object(a["a"])({url:"/cnpj",method:"get",params:e})}},fcac:function(e,t,r){"use strict";r.d(t,"c",(function(){return o})),r.d(t,"d",(function(){return i})),r.d(t,"f",(function(){return n})),r.d(t,"e",(function(){return c})),r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return d}));var a=r("b775");function o(e){return Object(a["a"])({url:"/company",method:"get",params:e})}function i(){return Object(a["a"])({url:"/company/all",method:"get"})}function n(e){return Object(a["a"])({url:"/company/"+e,method:"get"})}function s(e){return Object(a["a"])({url:"/company",method:"post",data:e})}function l(e,t){return Object(a["a"])({url:"/company/"+t,method:"put",data:e})}function c(e,t){return t?l(e,t):s(e)}function u(e){return Object(a["a"])({url:"/company/"+e,method:"delete"})}function d(e){return Object(a["a"])({url:"/company/file",method:"delete",data:{id:e}})}}}]);